<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Management</title>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">

<style>

*{
    box-sizing:border-box;
    font-family:'Kanit',sans-serif;
}

body{
    margin:0;
    min-height:100vh;
    background: radial-gradient(circle at top left,#2a003f,#0f001a 60%,#000000);
    display:flex;
    justify-content:center;
    align-items:center;
    color:white;
}

.container{
    width:950px;
    padding:45px;
    border-radius:28px;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(25px);
    box-shadow: 0 0 60px rgba(140,0,255,0.25);
}

h1{
    text-align:center;
    font-weight:600;
    letter-spacing:1px;
    margin-bottom:45px;
    background: linear-gradient(90deg,#c471ff,#f64f59);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

.form-box{
    display:flex;
    gap:15px;
    margin-bottom:35px;
}

input{
    flex:1;
    padding:16px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,0.15);
    background: rgba(255,255,255,0.08);
    color:white;
    font-size:16px;
    outline:none;
    transition:0.3s;
}

input:focus{
    border:1px solid #b84dff;
    box-shadow:0 0 10px #b84dff80;
}

.add-btn{
    padding:16px 28px;
    border-radius:16px;
    border:none;
    cursor:pointer;
    font-weight:600;
    font-size:15px;
    background: linear-gradient(45deg,#8e2de2,#4a00e0);
    color:white;
    transition:0.3s;
}

.add-btn:hover{
    transform:translateY(-4px);
    box-shadow:0 10px 25px rgba(142,45,226,0.5);
}

.product-grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(270px,1fr));
    gap:25px;
}

.card{
    position:relative;
    padding:25px;
    border-radius:22px;
    background: linear-gradient(145deg,#1a0029,#0a0014);
    border:1px solid rgba(180,0,255,0.25);
    box-shadow:
        0 0 25px rgba(150,0,255,0.15),
        inset 0 0 20px rgba(255,255,255,0.02);
    transition:0.4s;
}

.card:hover{
    transform:translateY(-8px) scale(1.02);
    box-shadow:
        0 0 40px rgba(180,0,255,0.4),
        inset 0 0 30px rgba(255,255,255,0.05);
}

.product-name{
    font-size:18px;
    font-weight:600;
    margin-bottom:8px;
}

.price{
    font-size:16px;
    opacity:0.85;
}

.delete-btn{
    position:absolute;
    top:18px;
    right:18px;
    background:linear-gradient(45deg,#ff0844,#ff416c);
    border:none;
    padding:7px 12px;
    border-radius:12px;
    cursor:pointer;
    font-size:13px;
    color:white;
    transition:0.3s;
}

.delete-btn:hover{
    transform:scale(1.1);
    box-shadow:0 0 15px #ff416c;
}

.empty{
    text-align:center;
    opacity:0.6;
    margin-top:30px;
}

</style>
</head>

<body>

<div class="container">

    <h1>üñ§ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h1>

    <div class="form-box">
        <input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
        <input type="number" id="price" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤">
        <button class="add-btn" onclick="addProduct()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    </div>

    <div class="product-grid" id="productList"></div>

</div>

<script>

const API_URL="http://localhost/workshop_api/api/products.php";

function addProduct(){

    const name=document.getElementById("name").value;
    const price=document.getElementById("price").value;

    if(!name||!price){
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
        return;
    }

    fetch(API_URL,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
            product_name:name,
            price:price
        })
    })
    .then(res=>res.json())
    .then(()=>{
        document.getElementById("name").value="";
        document.getElementById("price").value="";
        loadProducts();
    });
}

function deleteProduct(id){

    if(!confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) return;

    fetch(API_URL,{
        method:"DELETE",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({id:id})
    })
    .then(res=>res.json())
    .then(()=>{
        loadProducts();
    });
}

function loadProducts(){

    fetch(API_URL)
    .then(res=>res.json())
    .then(data=>{

        const list=document.getElementById("productList");
        list.innerHTML="";

        if(data.length===0){
            list.innerHTML="<div class='empty'>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</div>";
            return;
        }

        data.forEach(product=>{

            const card=document.createElement("div");
            card.className="card";

            card.innerHTML=`
                <button class="delete-btn" onclick="deleteProduct(${product.id})">‡∏•‡∏ö</button>
                <div class="product-name">${product.product_name}</div>
                <div class="price">${parseFloat(product.price).toLocaleString()} ‡∏ö‡∏≤‡∏ó</div>
            `;

            list.appendChild(card);

        });

    });
}

loadProducts();

</script>

</body>
</html>
